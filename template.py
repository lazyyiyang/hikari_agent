CODER_PROMPT = """# 任务
您是一位资深的数据分析师，现在将给您一份数据的样例，并传给您data，您需要根据分析思路，对data进行数据分析，并生成python代码

# 注意
1. 您需要生成python代码，代码中使用的数据请读取"tmp/data.json"，请妥善处理空值，空值设为了-999
2. data格式为为dict，其中key为报告类型，value为list of dict格式的数据
3. 不需要生成图表，只需要进行数据计算，所有的结果通过result变量返回
4. result是一个字典，key是相应的计算描述，value是计算结果
5. 代码请通过````python\n\n``` 包裹起来, 否则我将无法准确获取
6. 只返回python代码即可

# 分析思路
{idea}

# 数据样例（仅保留1行）
{data}
"""


INDEX_SELECT_PROMPT = """# 任务
您是一位资深的数据分析师，现在将给您一份数据的样例，并传给您data，您需要根据分析思路，挑选最关心的特征，并生成相应的python代码完成特征筛选

# 注意
1. 您需要生成python代码，代码中使用的数据请读取"tmp/data.json"
2. data格式为为dict，其中key为报告类型，value为数据：list of dict格式
3. 仅生成筛选特征的代码即可，执行后的数据需要和原来的数据结构保持一致（仅作特征筛选）
4. 将筛选后的数据保存到"tmp/data.json"进行覆盖
5. 代码请通过````python\n\n``` 包裹起来, 否则我将无法准确获取
6. 只返回python代码即可

# 分析思路
{idea}

# 数据样例
{data}
"""


QUERY_REWRITE_PROMPT = """
我现在要为{entity}生成一份{report_type}报告，在这个过程中需要搜集大量资料，请帮我写几个相关查询语句，帮助我更好的找到资料
"""


VALUATION_PROMPT = """# 任务
您是一位资深的投行分析师，现在将给您一份估值相关数据的样例，并传给您data，您需要根据分析思路，对data进行数据分析，并生成投资建议


# 分析思路
{idea}

# 数据样例（仅保留1行）
{data}
"""

ANALYSIS_PROMPT = """#### **角色与目标**

你是一名资深的财务分析师。你的任务是基于传入的财务数据，对一家公司进行全面、深入的财务分析，并生成一份结构清晰、结论明确的专业分析报告。财务数据中包含了该公司过去3个财年的核心财务报表数据（利润表、资产负债表、现金流量表）。

#### **分析要求与步骤**

请严格按照以下结构和要求，生成你的分析报告：

**## 1. 核心财务摘要 (Executive Summary)**

  * 首先，对公司的整体财务状况和经营成果给出一个高度概括的总结。
  * 点明公司在分析期内的主要财务亮点和核心风险。

**## 2. 盈利能力分析 (Profitability Analysis)**

  * 计算并分析以下关键盈利指标：
      * **毛利率 (Gross Profit Margin):** `(销售收入 - 销售成本) / 销售收入`
      * **营业利润率 (Operating Profit Margin):** `营业利润 / 销售收入`
      * **净利率 (Net Profit Margin):** `净利润 / 销售收入`
      * **总资产回报率 (ROA - Return on Assets):** `净利润 / 平均总资产`
      * **净资产收益率 (ROE - Return on Equity):** `净利润 / 平均净资产`
  * **要求：**
      * 对每个指标进行**趋势分析**，说明其在分析期内的变化方向（上升、下降、稳定）。
      * 解读这些变化背后的可能原因（例如：成本控制能力变化、销售策略调整、费用管理效率等）。
      * 如果提供了行业基准数据，请进行**横向对比**，评估公司在行业中的盈利水平。

**## 3. 偿债能力分析 (Solvency Analysis)**

  * 评估公司的财务稳定性和抗风险能力。
  * **短期偿债能力 (Liquidity):**
      * **流动比率 (Current Ratio):** `流动资产 / 流动负债`
      * **速动比率 (Quick Ratio):** `(流动资产 - 存货) / 流动负债`
  * **长期偿债能力 (Leverage):**
      * **资产负债率 (Debt-to-Asset Ratio):** `总负债 / 总资产`
      * **产权比率 (Debt-to-Equity Ratio):** `总负债 / 股东权益`
      * **利息保障倍数 (Interest Coverage Ratio):** `(税前利润 + 利息费用) / 利息费用`
  * **要求：**
      * 分析各比率的趋势，判断公司偿债能力的强弱变化。
      * 解读高或低的偿债比率可能带来的财务风险与机遇（例如：高负债的杠杆效应与利息负担）。

**## 4. 运营效率分析 (Efficiency Analysis)**

  * 评估公司利用其资产创造收入的效率。
  * 计算并分析以下周转率指标：
      * **存货周转率 (Inventory Turnover):** `销售成本 / 平均存货`
      * **应收账款周转率 (Accounts Receivable Turnover):** `销售收入 / 平均应收账款`
      * **总资产周转率 (Total Asset Turnover):** `销售收入 / 平均总资产`
  * **要求：**
      * 进行趋势分析，并计算相应的**周转天数**。
      * 解读周转率高低所反映的公司在存货管理、账款回收和资产利用方面的效率。

**## 5. 现金流量分析 (Cash Flow Analysis)**

  * 这是分析的重点，用于评估公司利润的“含金量”和真实财务状况。
  * **分析要点：**
      * **经营活动现金流 (Operating Cash Flow - OCF):**
          * 分析其与**净利润**的关系。OCF是否持续为正且高于净利润？这反映了盈利质量。
          * 分析其增长趋势，判断公司主营业务的造血能力。
      * **投资活动现金流 (Investing Cash Flow - ICF):**
          * 分析其主要流向（是购建固定资产、无形资产还是对外投资？），判断公司的扩张战略。
          * 持续大额的负值可能表明公司处于扩张期。
      * **筹资活动现金流 (Financing Cash Flow - FCF):**
          * 分析其构成（是来自借款、发行股票，还是用于偿还债务、支付股利？），判断公司的融资策略和对股东的回报。
  * **要求：**
      * 综合三大现金流的形态（例如：“正负负”代表成熟期企业，“负负正”代表初创期企业），对公司所处的发展阶段进行画像。

**## 6. 综合评估与建议 (Overall Assessment & Recommendations)**

  * 基于以上所有分析，进行总结。
  * **主要优势 (Key Strengths):** 清晰列出公司财务上的几个核心优点。
  * **主要劣势与潜在风险 (Key Weaknesses & Potential Risks):** 清晰列出公司面临的主要财务挑战和需要警惕的风险点。
  * **未来展望与建议 (Outlook & Recommendations):**
      * 对公司未来的财务表现进行一个简要的展望。
      * 提出 `2-3` 条具有针对性和可行性的管理建议（例如：改善现金流、优化资本结构、提升运营效率等）。

#### **输出格式**

请使用 **Markdown** 格式进行输出，确保报告结构清晰、重点突出。使用标题、粗体和项目符号来组织内容，使其专业且易于阅读。

【行业特性】
{idea}

【财务数据】
{data}
"""
